<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ì´ë©”ì¼</title>
    <link rel="stylesheet" href="/main/css/main-style.css"> <!-- ë©”ì¸ ìŠ¤íƒ€ì¼ ì—°ê²° -->
    <script src="/main/js/main.js"></script> <!-- ë©”ì¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—°ê²° -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=keyboard_arrow_down" />
    <link rel="stylesheet" href="/sidemenu/mail/css/mail-style.css">
</head>
<body>
<header>
    <div class="side-menu-bar">
        <ul>
            <li><a href="/main">ğŸ¶PetHarmonyğŸ¶</a></li>
            <li><a href="http://localhost:9595/sidemenu/schedule">ê·¼íƒœê´€ë¦¬</a></li>
            <li><a href="http://localhost:9595/sidemenu/messenger">ë©”ì‹ ì €(ì±„íŒ…)</a></li>
            <li><a href="http://localhost:9595/sidemenu/mail">ì´ë©”ì¼</a></li>
            <li><a href="http://localhost:9595/sidemenu/adoption">ì…ì–‘</a></li>
            <li class="animal-menu">
                <div class="menu-wrapper">
                    <a href="http://localhost:9595/sidemenu/animals">ë™ë¬¼
                        <span class="material-symbols-outlined">keyboard_arrow_down</span>
                    </a>
                </div>
                <ul class="sub-menu">
                    <li><a href="http://localhost:9595/sidemenu/animals">êµ¬ì¡°ë™ë¬¼</a></li>
                    <li><a href="http://localhost:9595/sidemenu/adoptionComplete">ì…ì–‘ì™„ë£Œ</a></li>
                    <li><a href="http://localhost:9595/sidemenu/stock">ì¬ê³ ê´€ë¦¬</a></li>
                </ul>
            </li>
            <li><a href="http://localhost:9595/sidemenu/facilities">ì‹œì„¤ê´€ë¦¬</a></li>
            <li><a href="http://localhost:9595/sidemenu/board">ì „ì‚¬ê²Œì‹œíŒ</a></li>
            <li><a href="http://localhost:9595/sidemenu/employee">ì§ì›ì •ë³´</a></li>
            <li><a href="http://localhost:9595/sidemenu/mypage">ë§ˆì´í˜ì´ì§€</a></li>
            <li><a href="http://localhost:9595/sidemenu/approval">ê²°ì¬</a></li>
            <li class="admin-menu">
                <div class="admin-menu-wrapper">
                    <a href="http://localhost:9595/sidemenu/manager">ê´€ë¦¬ìì „ìš©
                        <span class="material-symbols-outlined">keyboard_arrow_down</span>
                    </a>
                </div>
                <ul class="sub-menu">
                    <li><a href="http://localhost:9595/sidemenu/manager">ê´€ë¦¬ìí˜ì´ì§€</a></li>
                    <li><a href="http://localhost:9595/sidemenu/employeeRegister">ì‚¬ì›ë“±ë¡</a></li>
                    <li><a href="http://localhost:9595/sidemenu/employeeManagement">ì§ì›ê´€ë¦¬</a></li>
                    <li><a href="http://localhost:9595/sidemenu/approvalBox">ê²°ì¬í•¨</a></li>
                </ul>
            </li>
        </ul>
    </div>
</header>
<div class="change-screen-email">
    <div id="change-screen-content">
        <div class="form">
            <div class="navigation">
                <nav>
                    <ul>
                        <li style="font-size: 20px;"><b>ğŸ“®&nbsp;&nbsp;&nbsp;&nbsp;ì „ì²´ìª½ì§€</b></li><br><br><br>
                        <li style="font-size: 20px;"><b>ğŸ“¥&nbsp;&nbsp;&nbsp;&nbsp;ë°›ì€ìª½ì§€í•¨</b></li><br><br><br>
                        <li style="font-size: 20px;"><b>ğŸ“¤&nbsp;&nbsp;&nbsp;&nbsp;ë³´ë‚¸ìª½ì§€í•¨</b></li><br><br><br>
                        <li style="font-size: 20px;"><b>â­&nbsp;&nbsp;&nbsp;&nbsp;ì¤‘ìš”ìª½ì§€í•¨</b></li><br><br><br>
                        <li style="font-size: 20px;"><b>âŒ&nbsp;&nbsp;&nbsp;&nbsp;íœ´ì§€í†µ</b></li><br><br><br>
                        <li style="font-size: 20px;"><b>ğŸ“¦&nbsp;&nbsp;&nbsp;&nbsp;ë³´ê´€í•¨</b>
                            <br><br><ul>
                                <li style="font-size: 15px;"><b>- ë°›ì€ìª½ì§€ ë³´ê´€í•¨</b></li>
                                <li style="font-size: 15px;"><b>- ë³´ë‚¸ìª½ì§€ ë³´ê´€í•¨</b></li>
                            </ul>
                        </li>
                    </ul>
                    <button id="messageModalBtn" class="styled-button">ğŸ– ìª½ì§€ ì“°ê¸°</button>
                </nav>
            </div>

            <div class="form1">
                <table border="1" class="post-list">
                    <colgroup>
                        <col style="width: 2%;">
                        <col style="width: 2%;">
                        <col style="width: 4%;">
                        <col style="width: 10%;">
                        <col style="width: 10%;">
                        <col style="width: 5%;">
                    </colgroup>
                    <thead>
                    <tr>
                        <th>
                            <!-- ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ -->
                            <input type="checkbox" id="selectAll" onclick="toggleSelectAll(this)">
                        </th>
                        <th>
                            <input type="checkbox" id="selectAllStars" onclick="toggleStarSelectAll(this)">
                            <label for="selectAllStars" id="selectAllStarsLabel"></label>
                        </th>
                        <th>ë©”ì¼ë²ˆí˜¸</th>
                        <th>ë³´ë‚¸ì‚¬ëŒ</th>
                        <th>ì œëª©</th>
                        <th>ë‚ ì§œ</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="mail : ${mail}">
                        <td>
                            <!-- ê¸°ë³¸ ì²´í¬ë°•ìŠ¤ -->
                            <input type="checkbox" class="select-item" name="selectedMail" th:value="${mail.emailCode}">
                        </td>
                        <td>
                            <label class="star-checkbox">
                                <input type="checkbox" class="star-check" id="star_{{mail.emailCode}}" name="starredMail" th:value="${mail.importantEmail}" onchange="toggleStar(this)">
                                <i></i>
                            </label>
                        </td>
                        <td>
                            <a th:href="@{/mail/details/{emailCode}(emailCode=${mail.emailCode})}" class="styled-link"></a>
                        </td>
                        <td th:text="${mail.employeeDTO.empName}"></td>
                        <td th:text="${mail.emailTitle}"></td>
                        <td th:text="${#dates.format(mail.sendDate, 'yyyy-MM-dd')}"></td>
                    </tr>
                    </tbody>
                </table>

                <div id="messageModal" class="modal">
                    <div class="modal-content">
                        <span class="close-btn" id="closeModalBtn">&times;</span>
                        <h2>ìª½ì§€ ë³´ë‚´ê¸°</h2>
                        <button id="openModalBtn" class="styled-button2"><b>ğŸ” ì°¾ê¸°</b></button>
                        <form id="messageForm">
                            <div class="form-group">
                                <label for="recipient">ë°›ëŠ” ì‚¬ëŒ</label>
                                <input class="textbox" type="text" id="recipient" name="recipient" placeholder="ë°›ëŠ” ì‚¬ëŒì„ ì…ë ¥í•˜ì„¸ìš”" required>
                            </div>
                            <div class="form-group">
                                <label for="message">ìª½ì§€ ë‚´ìš©</label>
                                <textarea id="message" name="message" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                            </div>
                            <button type="submit" id="sendMessageBtn" class="submit">ë³´ë‚´ê¸°</button>
                        </form>
                    </div>
                </div>

                <div id="addressBookModal" class="modal2">
                    <div class="modal-content2">
                        <span class="close-btn" id="closeModalBtn2">&times;</span>
                        <h2>ì£¼ì†Œë¡</h2>
                        <div class="search-bar">
                            <input class="textbox2" type="text" id="searchInput2" placeholder="ì§ì› ê²€ìƒ‰..." oninput="filterEmployees()">
                        </div>
                        <div class="select-all">
                            <input type="checkbox" id="selectAllEmployees" onclick="toggleEmployeeSelectAll(this)"> ì „ì²´ ì„ íƒ
                        </div>
                        <div id="addressBookContainer2">
                            <div class="department-group">
                                <h3>ğŸ“‚ ê²½ì˜ë¶€</h3>
                                <div class="employee-list">
                                    <label><input type="checkbox" class="employee-check ê²½ì˜ë¶€"> ì´ìˆœì œ</label>
                                    <label><input type="checkbox" class="employee-check ê²½ì˜ë¶€"> ìµœë§Œì‹</label>
                                </div>
                            </div>

                            <div class="department-group">
                                <h3>ğŸ“‚ ì• ê²¬ë‹´ë‹¹ë¶€</h3>
                                <div class="employee-list">
                                    <label><input type="checkbox" class="employee-check ì• ê²¬ë‹´ë‹¹ë¶€"> í™©ì •ë§Œ</label>
                                    <label><input type="checkbox" class="employee-check ì• ê²¬ë‹´ë‹¹ë¶€"> ì†¡í•´êµ</label>
                                    <label><input type="checkbox" class="employee-check ì• ê²¬ë‹´ë‹¹ë¶€"> ì •ìœ ì„±</label>
                                    <label><input type="checkbox" class="employee-check ì• ê²¬ë‹´ë‹¹ë¶€"> ë§ˆë™ì‹</label>
                                    <label><input type="checkbox" class="employee-check ì• ê²¬ë‹´ë‹¹ë¶€"> ê¹€ìœ¤ì‹</label>
                                </div>
                            </div>

                            <div class="marketing-group">
                                <h3>ğŸ“‚ ë§ˆì¼€íŒ…ë¶€</h3>
                                <div class="employee-list">
                                    <label><input type="checkbox" class="employee-check ë§ˆì¼€íŒ…ë¶€"> ë¥˜ìŠ¹ìš©</label>
                                    <label><input type="checkbox" class="employee-check ë§ˆì¼€íŒ…ë¶€"> ì „ë„ì–¸</label>
                                    <label><input type="checkbox" class="employee-check ë§ˆì¼€íŒ…ë¶€"> ê¹€í•´ìˆ˜</label>
                                    <label><input type="checkbox" class="employee-check ë§ˆì¼€íŒ…ë¶€"> ì¡°ì •ì‹</label>
                                    <label><input type="checkbox" class="employee-check ë§ˆì¼€íŒ…ë¶€"> í•œì§€ë§Œ</label>
                                </div>
                            </div>

                            <div class="business-group">
                                <h3>ğŸ“‚ ì˜ì—…ë¶€</h3>
                                <div class="employee-list">
                                    <label><input type="checkbox" class="employee-check ì˜ì—…ë¶€"> ë³€ìš°ì‹</label>
                                    <label><input type="checkbox" class="employee-check ì˜ì—…ë¶€"> ê¹€ê³ ìš´</label>
                                    <label><input type="checkbox" class="employee-check ì˜ì—…ë¶€"> ì´ë³‘í˜„</label>
                                </div>
                            </div>

                            <div class="distribution-group">
                                <h3>ğŸ“‚ ë¬¼ë¥˜ë¶€</h3>
                                <div class="employee-list">
                                    <label><input type="checkbox" class="employee-check ë¬¼ë¥˜ë¶€"> ì†¡ê°•íš¨</label>
                                    <label><input type="checkbox" class="employee-check ë¬¼ë¥˜ë¶€"> ì„¤ê²½ê·œ</label>
                                    <label><input type="checkbox" class="employee-check ë¬¼ë¥˜ë¶€"> ì¥ë™ê²€</label>
                                </div>
                            </div>

                            <div class="Service-group">
                                <h3>ğŸ“‚ ê³ ê°ì—…ë¬´ë¶€</h3>
                                <div class="employee-list">
                                    <label><input type="checkbox" class="employee-check ê³ ê°ì—…ë¬´ë¶€"> ê³ ìš´ì •</label>
                                    <label><input type="checkbox" class="employee-check ê³ ê°ì—…ë¬´ë¶€"> ê¹€íƒœë¼</label>
                                </div>
                            </div>
                        </div>
                        <button id="submitSelection2" onclick="submitSelections()" class="styled-button3">ì„ íƒ ì™„ë£Œ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    // ìª½ì§€ ì“°ê¸° ëª¨ë‹¬ ì—´ê¸°
    document.getElementById('messageModalBtn').addEventListener('click', function() {
        document.getElementById('messageModal').style.display = 'block';
    });

    // ìª½ì§€ ì“°ê¸° ëª¨ë‹¬ ë‹«ê¸°
    document.getElementById('closeModalBtn').addEventListener('click', function() {
        document.getElementById('messageModal').style.display = 'none';
    });

    // ì°¾ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ì£¼ì†Œë¡ ëª¨ë‹¬ ì—´ê¸°
    document.getElementById('openModalBtn').addEventListener('click', function() {
        document.getElementById('addressBookModal').style.display = 'block';
    });

    // ì£¼ì†Œë¡ ëª¨ë‹¬ ë‹«ê¸°
    document.getElementById('closeModalBtn2').addEventListener('click', function() {
        document.getElementById('addressBookModal').style.display = 'none';
    });

    // ì£¼ì†Œë¡ ëª¨ë‹¬ì—ì„œ 'ì„ íƒ ì™„ë£Œ' ë²„íŠ¼ í´ë¦­ ì‹œ ì²˜ë¦¬ (ì„ íƒëœ ì§ì› ëª©ë¡ ì œì¶œí•˜ëŠ” ë¡œì§)
    function submitSelections() {
        // ì„ íƒëœ ì§ì›ë“¤ì˜ ì´ë¦„ì„ ë°°ì—´ë¡œ ê°€ì ¸ì˜¤ê¸°
        const selectedEmployees = document.querySelectorAll('.employee-check:checked');

        // ì„ íƒëœ ì§ì›ë“¤ì˜ ì´ë¦„ì„ ì €ì¥í•  ë°°ì—´
        let selectedNames = [];

        selectedEmployees.forEach(function(employee) {
            const nameElement = employee.nextElementSibling;
            if (nameElement) {
                selectedNames.push(nameElement.textContent.trim()); // ì²´í¬ë°•ìŠ¤ ì˜†ì˜ ì´ë¦„ì„ ê°€ì ¸ì˜µë‹ˆë‹¤
            }
        });

        // 'ë°›ëŠ” ì‚¬ëŒ' ì…ë ¥ í•„ë“œì— ì´ë¦„ì„ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥
        const recipientField = document.getElementById('recipient');
        if (recipientField) {
            recipientField.value = selectedNames.join(', ');
        }

        // ì£¼ì†Œë¡ ëª¨ë‹¬ì„ ë‹«ìŠµë‹ˆë‹¤
        const addressBookModal = document.getElementById('addressBookModal');
        if (addressBookModal) {
            addressBookModal.style.display = 'none';
        }
    }

    // ì§ì› ê²€ìƒ‰ í•„í„°ë§ (ì£¼ì†Œë¡)
    function filterEmployees() {
        let searchInput = document.getElementById('searchInput2').value.toLowerCase();
        let employees = document.querySelectorAll('.employee-list label');

        employees.forEach(function(employee) {
            let employeeName = employee.textContent.toLowerCase();
            if (employeeName.indexOf(searchInput) > -1) {
                employee.style.display = '';
            } else {
                employee.style.display = 'none';
            }
        });
    }

    // ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ ì²˜ë¦¬
    function toggleEmployeeSelectAll(source) {
        let checkboxes = document.querySelectorAll('.employee-check');
        checkboxes.forEach(function(checkbox) {
            checkbox.checked = source.checked;
        });
    }

    // ë©”ì¼ ëª©ë¡ì—ì„œ ì „ì²´ ì„ íƒ ì²´í¬ë°•ìŠ¤ ì²˜ë¦¬
    function toggleSelectAll(source) {
        let checkboxes = document.querySelectorAll('.select-item');
        checkboxes.forEach(function(checkbox) {
            checkbox.checked = source.checked;
        });
    }

    // ë³„í‘œ ì„ íƒ ì „ì²´ ì²˜ë¦¬
    function toggleStarSelectAll(source) {
        let checkboxes = document.querySelectorAll('.star-check');
        checkboxes.forEach(function(checkbox) {
            checkbox.checked = source.checked;
        });
    }

    // ë³„í‘œ í´ë¦­ ì²˜ë¦¬
    function toggleStar(checkbox) {
        let starIcon = checkbox.nextElementSibling;
        if (checkbox.checked) {
            starIcon.classList.add('checked');
        } else {
            starIcon.classList.remove('checked');
        }
    }
</script>
</html>